"use strict";var D=Object.create;var c=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var k=(r,t)=>{for(var e in t)c(r,e,{get:t[e],enumerable:!0})},S=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of z(t))!U.call(r,s)&&s!==e&&c(r,s,{get:()=>t[s],enumerable:!(o=P(t,s))||o.enumerable});return r};var M=(r,t,e)=>(e=r!=null?D(E(r)):{},S(t||!r||!r.__esModule?c(e,"default",{value:r,enumerable:!0}):e,r)),j=r=>S(c({},"__esModule",{value:!0}),r);var J={};k(J,{ContractFactory:()=>i,ContractUtils:()=>y});module.exports=j(J);var B=require("@ethersproject/bytes"),b=require("@ethersproject/logger"),h=require("@fuel-ts/abi-coder"),A=require("@fuel-ts/keystore"),I=require("@fuel-ts/program"),v=require("@fuel-ts/providers"),T=require("@fuel-ts/transactions"),q=require("@fuel-ts/versions");var y={};k(y,{getContractId:()=>m,getContractRoot:()=>C,getContractStorageRoot:()=>l,includeHexPrefix:()=>u});var n=require("@ethersproject/bytes"),x=require("@ethersproject/sha2"),L=require("@fuel-ts/merkle"),R=M(require("@fuel-ts/sparsemerkle")),C=r=>{let e=[],o=(0,n.arrayify)(r);for(let s=0;s<o.length;s+=8){let a=new Uint8Array(8);a.set(o.slice(s,s+8)),e.push(a)}return(0,L.calcRoot)(e.map(s=>(0,n.hexlify)(s)))},l=r=>{let t=new R.default;return r.forEach(({key:e,value:o})=>t.update(e,o)),t.root},m=(r,t,e)=>{let o=C((0,n.arrayify)(r));return(0,x.sha256)((0,n.concat)(["0x4655454C",t,o,e]))},u=(r,t)=>(0,n.hexlify)(r,{...t,allowMissingPrefix:!0});var H=new b.Logger(q.versions.FUELS),i=class{constructor(t,e,o=null){this.bytecode=(0,B.arrayify)(t),e instanceof h.Interface?this.interface=e:this.interface=new h.Interface(e),o&&"provider"in o?(this.provider=o.provider,this.account=o):(this.provider=o,this.account=null)}connect(t){return new i(this.bytecode,this.interface,t)}createTransactionRequest(t){var d;let e=(d=t==null?void 0:t.storageSlots)==null?void 0:d.map(({key:p,value:f})=>({key:u(p),value:u(f)})).sort(({key:p},{key:f})=>p.localeCompare(f)),o={salt:(0,A.randomBytes)(32),...t,storageSlots:e||[]},s=o.stateRoot||l(o.storageSlots),a=m(this.bytecode,o.salt,s),g=new v.CreateTransactionRequest({gasPrice:0,gasLimit:T.MAX_GAS_PER_TX,bytecodeWitnessIndex:0,witnesses:[this.bytecode],...o});return g.addContractCreatedOutput(a,s),{contractId:a,transactionRequest:g}}async deployContract(t){if(!this.account)return H.throwArgumentError("Cannot deploy Contract without account","account",this.account);let{contractId:e,transactionRequest:o}=this.createTransactionRequest(t);return await this.account.fund(o),await(await this.account.sendTransaction(o)).wait(),new I.Contract(e,this.interface,this.account)}};0&&(module.exports={ContractFactory,ContractUtils});
//# sourceMappingURL=index.js.map